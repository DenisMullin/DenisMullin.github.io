<!DOCTYPE html>
<html lang="en">
    <head>
        <meta name="description" content="" />
        <meta charset="utf-8">
        <title></title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="https://telegram.org/js/telegram-web-app.js"></script>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        
        <p class="title">window.Telegram.WebApp.initData</p>
        <pre id="pre_1"></pre>
        <p class="title">window.Telegram.WebApp.initDataUnsafe</p>
        <pre id="pre_2"></pre>
        <p class="title">window.Telegram.WebApp.platform</p>
        <pre id="pre_3"></pre>
        <p class="title">window.Telegram.WebApp.version</p>
        <pre id="pre_4"></pre>
        <p class="title">window.Telegram.WebApp.viewportHeight</p>
        <pre id="pre_5"></pre>
        <p class="title">window.Telegram.WebApp.viewportStableHeight</p>
        <pre id="pre_6"></pre>
        <p class="title">window.Telegram.WebApp.WebAppUser.username</p>
        <pre id="pre_7"></pre>

        <script>

        function printObj(obj, level = -1, lk = false) {
            level += 1;
            let oneSpace = '    ';
            let space = oneSpace.repeat(level);
            let arKeys = Object.keys(obj);
            let emptyObj = arKeys.length === 0;
            let lK = arKeys.slice(-1);
            let fNL = emptyObj ? '' : '\n';
            let nS = emptyObj ? '' : space;
            let res = `${fNL}${nS}{${fNL}`;
            let lkk = '';
            for (const [key, value] of Object.entries(obj)) {
                if (typeof value === 'object' && !Array.isArray(value)) {
                    res += `${oneSpace}${space}${key}: ${printObj(value, level, lK != key)}`;
                } else {
                    res += `${oneSpace}${space}${key}: ${parseType(value)}${lK != key ? ',' : ''}\n`;
                }
                lkk = key;
            }
            level++;
            space = oneSpace.repeat(Math.max(level-1, 0));
            let comma = level > 1 && lk ? ',' : '';
            res += `${nS}}${comma}\n`;
            return res;
        }

            function parseType(val) {
                let res = ``;
                switch (typeof val) {
                    case 'Number':
                        res = `${val}`
                        break;
                    case 'string':
                        res = `'${val}'`;
                        break;
                    case 'object':
                        res = `[${val}]`;
                        break;
                    default:
                        res = `${val}`;
                }
                return res;
            }

            const app = window.Telegram.WebApp;
            document.querySelector('#pre_1').innerHTML = app.initData;
            document.querySelector('#pre_2').innerHTML = (typeof app.initDataUnsafe === 'object') ? printObj(app.initDataUnsafe) : app.initDataUnsafe;
            document.querySelector('#pre_3').innerHTML = app.platform;
            document.querySelector('#pre_4').innerHTML = app.version;
            document.querySelector('#pre_5').innerHTML = app.viewportHeight;
            document.querySelector('#pre_6').innerHTML = app.viewportStableHeight;
            document.querySelector('#pre_7').innerHTML = app.WebAppUser.username;
        </script>
    </body>
</html>